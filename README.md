# 商品采购下单系统

## 系统概述
一个基于 FastAPI 和 React 的商品采购下单系统，用于管理商品、记录销量数据并计算采购建议。

### 主要功能
1. 商品管理：添加、编辑、删除商品，支持批量导入
2. 销量管理：记录和管理销量数据，支持批量导入
3. 采购计算：基于历史销量数据计算采购建议

## 技术栈
- 后端：Python FastAPI
- 前端：React + Ant Design
- 数据库：SQLite

## 环境要求
- Python 3.8+
- Node.js 14+
- npm 6+

## 安装和运行
代码文件夹权限变更
sudo chown -R ubuntu:ubuntu /path/to/folder
sudo chmod -R 755 /path/to/folder
### 后端
1. 进入 backend 目录
2. 需先安装虚拟环境
    # 创建虚拟环境（如果尚未创建）
    python3 -m venv venv

    # 激活虚拟环境
    source venv/bin/activate

    # 现在可以安全地安装 FastAPI
    pip install fastapi

    # 安装完成后，可以退出虚拟环境（可选）
    deactivate
3. 安装依赖：`pip install -r requirements.txt`
4. 运行服务：`uvicorn main:app --reload` python3 main.py

### 前端
1. 进入 frontend 目录
2. 安装依赖：`npm install`
3. 运行服务：`npm start`

## 版本历史

### 当前版本 (2024-03-22)
- 主要更新：
  1. 优化商品导入功能，添加详细的导入过程日志
  2. 修复商品导入时预估天数读取问题
  3. 更新 Pydantic 模型配置，将 orm_mode 改为 from_attributes
  4. 优化日志输出，显示详细的计算过程
  5. 完善销量数据查询逻辑，确保获取正确的历史天数

### 历史版本 (2024-03-22)
- 主要更新：
  1. 修复采购计算中历史销量数据查询的日期范围问题
  2. 更新 Pydantic 模型配置，将 orm_mode 改为 from_attributes
  3. 优化日志输出，显示详细的计算过程
  4. 完善销量数据查询逻辑，确保获取正确的历史天数

### 历史版本 (2024-03-21)
- 主要更新：
  1. 优化采购计算页面布局，增加商品信息显示
  2. 完善商品导入功能，支持商品描述字段
  3. 优化销量数据处理，防止重复记录
  4. 增加销量数据清空功能
  5. 改进商品选择下拉列表显示格式

## 使用说明

### 商品管理
1. 支持单个添加和批量导入商品
2. 商品信息包括：名称、编码、描述、单位、预估天数
3. 可以查看每个商品的历史销量数据

### 销量管理
1. 支持单个录入和批量导入销量数据
2. 提供按商品编码和名称的筛选功能
3. 支持编辑和删除销量记录
4. 可以一键清空历史销量数据

### 采购计算
1. 可以同时选择多个商品进行计算
2. 每个商品可以设置：
   - 实时库存
   - 在途库存
   - 参考天数
3. 计算结果包含：
   - 建议采购数量
   - 预估销量
   - 日均销量
   - 备注说明 